<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Wiki</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --neon: #00e5ff;
            --muted: #80deea;
            --bg1: #021019;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            margin: 0;
            background: radial-gradient(circle at top, var(--bg1), #000);
            font-family: 'Roboto', sans-serif;
            color: #e0f7fa;
            overflow-x: hidden;
        }

        header {
            background: rgba(0, 255, 255, 0.05);
            backdrop-filter: blur(6px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.2);
            padding: 12px 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        header p {
            margin: 0;
            font-size: 0.9em;
            color: var(--muted);
        }

        header h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8em;
            color: var(--neon);
            text-shadow: 0 0 10px var(--neon);
            margin: 6px 0 10px;
        }

        nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 8px;
        }

        nav a {
            color: var(--muted);
            text-decoration: none;
            padding: 7px 14px;
            border: 1px solid rgba(0, 255, 255, 0.12);
            border-radius: 8px;
            transition: .25s;
            cursor: pointer;
        }

        nav a:hover,
        nav a.active {
            background: rgba(0, 255, 255, 0.12);
            color: #fff;
        }

        main {
            max-width: 900px;
            margin: auto;
            padding: 20px;
        }

        article {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(0, 255, 255, 0.08);
            border-radius: 12px;
            padding: 18px;
            margin-bottom: 18px;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.03);
            animation: fadeIn .7s ease;
            display: none;
        }

        article.active {
            display: block;
        }

        article h2 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5em;
            color: #00bcd4;
            margin-bottom: 10px;
        }

        article h3 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2em;
            color: var(--neon);
            margin-top: 20px;
        }

        article p,
        article ul {
            line-height: 1.6;
            color: #b2ebf2;
        }
        
        .contact-table {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 10px 20px;
            margin-top: 20px;
            background: rgba(0, 255, 255, 0.05);
            border: 1px solid rgba(0, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
        }
        .contact-table strong {
            color: var(--neon);
            white-space: nowrap;
        }
        .contact-table span {
            color: #b2ebf2;
            word-break: break-all;
        }

        footer {
            text-align: center;
            padding: 14px;
            border-top: 1px solid rgba(0, 255, 255, 0.08);
            font-size: 0.9em;
            color: var(--muted);
            margin-top: 30px;
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(18px)
            }

            to {
                opacity: 1;
                transform: translateY(0)
            }
        }

        /* Top price widget */
        #cryptoTop {
            margin-top: 8px;
            color: var(--neon);
            font-weight: 600;
        }

        /* CHATBOT / INFO PANEL STYLES */
        #ai-assistant {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 320px;
            max-width: calc(100% - 40px);
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            overflow: hidden;
            font-size: 14px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.7);
            z-index: 9999;
            user-select: none;
            cursor: default;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(12px);
            transition: transform 0.3s ease;
        }

        #ai-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 14px;
            background: rgba(0, 255, 255, 0.1);
            cursor: grab;
            color: var(--neon);
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.1em;
            user-select: none;
        }

        #ai-header:active {
            cursor: grabbing;
        }

        #ai-body {
            display: flex;
            flex-direction: column;
            height: 360px;
            background: rgba(0, 0, 0, 0.6);
            color: var(--muted);
        }

        #ai-messages {
            flex: 1;
            padding: 10px 14px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.4;
            display: flex;
            flex-direction: column;
        }

        .msg {
            margin: 6px 0;
            padding: 8px 12px;
            border-radius: 8px;
            max-width: 85%;
            word-break: break-word;
            animation: messageSlide 0.3s ease;
        }

        .msg.user {
            background: rgba(0, 229, 255, 0.15);
            align-self: flex-end;
            color: #fff;
        }

        .msg.ai {
            background: rgba(255, 255, 255, 0.1);
            align-self: flex-start;
            border: 1px solid rgba(0, 255, 255, 0.12);
            color: #e0f7fa;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        #ai-controls {
            display: flex;
            border-top: 1px solid rgba(0, 255, 255, 0.12);
            background: rgba(0, 255, 255, 0.05);
        }

        #ai-input {
            flex: 1;
            padding: 12px 14px;
            border: none;
            background: transparent;
            color: #fff;
            outline: none;
            font-size: 14px;
            font-family: 'Roboto', sans-serif;
        }

        #ai-input::placeholder {
            color: var(--muted);
        }

        #ai-send {
            background: var(--neon);
            border: none;
            color: #000;
            padding: 0 18px;
            cursor: pointer;
            font-weight: 700;
            font-size: 14px;
            transition: all 0.3s;
        }

        #ai-send:hover {
            background: #00bcd4;
            transform: scale(1.05);
        }

        #ai-send:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        #ai-body.hidden {
            display: none;
        }

        .loading-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--muted);
            border-radius: 50%;
            border-top-color: var(--neon);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 420px) {
            #ai-assistant {
                right: 10px;
                left: 10px;
                width: auto;
            }

            #ai-body {
                height: 300px;
            }

            article {
                padding: 15px;
            }

            header h1 {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>

    <canvas id="stars"></canvas>

    <header>
        <p>Pembuat: Vlsk2045 | Email: Vlskthegame@gmail.com</p>
        <h1>‚ú® Modern Wiki ‚ú®</h1>
        <div id="cryptoTop">
            ‚è≥ Memuat harga Bitcoin...
        </div>
        <nav>
            <a href="#beranda" class="nav-link active">Beranda</a>
            <a href="#teknologi" class="nav-link">Teknologi</a>
            <a href="#sejarah" class="nav-link">Sejarah</a>
            <a href="#informasi" class="nav-link">Informasi</a>
            <a href="#kontak" class="nav-link">Kontak</a>
        </nav>
    </header>

    <main>
        <article id="beranda" class="content-section active">
            <h2>Apa Itu Modern Wiki?</h2>
            <p>Modern Wiki adalah platform pengetahuan yang dirancang untuk era digital masa depan. Dengan tampilan neon yang elegan, navigasi cepat, dan animasi interaktif, website ini membawa pengalaman membaca layaknya menjelajah galaksi informasi.</p>
            <h3>Kelebihan Dibanding Wiki Biasa</h3>
            <ul>
                <li>üöÄ Desain modern yang memanjakan mata.</li>
                <li>‚ö° Performa cepat dan ringan di semua perangkat.</li>
                <li>üåå Efek animasi bintang untuk nuansa futuristik.</li>
                <li>ü§ñ Chatbot AI untuk bantuan interaktif.</li>
                <li>üí∞ Integrasi data finansial real-time.</li>
            </ul>
        </article>

        <article id="teknologi" class="content-section">
            <h2>Teknologi Modern</h2>
            <p>Teknologi berkembang dengan kecepatan luar biasa. Mari jelajahi berbagai aspek teknologi yang mengubah dunia kita.</p>
            
            <h3>Artificial Intelligence (AI)</h3>
            <p>AI atau Kecerdasan Buatan adalah simulasi proses kecerdasan manusia oleh mesin, terutama sistem komputer. Aplikasi AI meliputi sistem pakar, pengenalan suara, dan visi mesin.</p>
            
            <h3>Blockchain Technology</h3>
            <p>Blockchain adalah teknologi buku besar terdistribusi yang mendasari cryptocurrency seperti Bitcoin. Teknologi ini menjanjikan transparansi dan keamanan data yang tinggi.</p>
            
            <h3>Internet of Things (IoT)</h3>
            <p>IoT menghubungkan perangkat fisik ke internet, memungkinkan mereka mengumpulkan dan berbagi data. Dari smart home hingga smart city, IoT mengubah cara kita berinteraksi dengan lingkungan.</p>
        </article>

        <article id="sejarah" class="content-section">
            <h2>Sejarah Teknologi Digital</h2>
            <p>Perjalanan teknologi digital dimulai dari konsep sederhana hingga revolusi yang mengubah peradaban manusia.</p>
            
            <h3>Era Komputer Pertama (1940-1960)</h3>
            <p>Komputer pertama seperti ENIAC dan UNIVAC menandai dimulainya era digital. Mesin-mesin raksasa ini menggunakan tabung vakum dan mengonsumsi daya listrik yang sangat besar.</p>
            
            <h3>Revolusi Personal Computer (1970-1990)</h3>
            <p>Kemunculan Apple II, IBM PC, dan Microsoft Windows membawa komputer ke rumah-rumah. Era ini mendemokratisasi akses ke teknologi komputasi.</p>
            
            <h3>Internet dan World Wide Web (1990-2000)</h3>
            <p>Tim Berners-Lee menciptakan World Wide Web pada tahun 1989, yang kemudian mengubah cara manusia berbagi informasi secara global.</p>
            
            <h3>Era Mobile dan Cloud (2000-sekarang)</h3>
            <p>Smartphone dan cloud computing mengubah teknologi menjadi layanan yang selalu tersedia di mana saja, kapan saja.</p>
        </article>

        <article id="informasi" class="content-section">
            <h2>Informasi Finansial & Aset Digital</h2>
            <p>Dapatkan informasi terkini seputar dunia finansial, mulai dari saham perusahaan teknologi hingga perkembangan terbaru di dunia aset kripto. Data di bawah ini diperbarui secara real-time untuk referensi Anda.</p>
            <div id="latest-crypto">
                <p>Memuat harga Bitcoin...</p>
            </div>
            <h3>Informasi Saham Teknologi</h3>
            <p><strong>Saham Perusahaan Teknologi:</strong> Sektor ini terus berinovasi. Perusahaan seperti Google (GOOGL), Apple (AAPL), dan Microsoft (MSFT) tetap menjadi pilar utama di pasar saham global.</p>
            <p><strong>Investasi Jangka Panjang:</strong> Memilih saham dengan fundamental kuat seringkali menjadi strategi yang lebih aman dibandingkan trading jangka pendek yang spekulatif.</p>
            
            <h3>Cryptocurrency</h3>
            <p><strong>Bitcoin (BTC):</strong> Cryptocurrency pertama dan terbesar berdasarkan kapitalisasi pasar. Bitcoin sering disebut sebagai "emas digital".</p>
            <p><strong>Ethereum (ETH):</strong> Platform blockchain untuk smart contracts dan aplikasi terdesentralisasi (DApps).</p>
            
            <h3>Tips Investasi</h3>
            <p><strong>Pentingnya Diversifikasi:</strong> Jangan menaruh semua aset Anda di satu tempat. Diversifikasi antara saham, obligasi, dan aset digital dapat membantu mengurangi risiko.</p>
            <p><strong>Catatan:</strong> Informasi di sini bukan merupakan nasihat finansial. Selalu lakukan riset Anda sendiri (DYOR).</p>
        </article>
        
        <article id="kontak" class="content-section">
            <h2>Hubungi Kami</h2>
            <p>Untuk pertanyaan, dukungan, atau informasi lebih lanjut, silakan hubungi kami melalui kontak di bawah ini.</p>
            <div class="contact-table">
                <strong>Nomor Telepon:</strong>
                <span>838 2173 0195</span>
                <strong>Email:</strong>
                <span>AnakEmas2045@gmail.com</span>
                <strong>Website:</strong>
                <span>modernwiki.vlsk2045.com</span>
                <strong>Jam Operasional:</strong>
                <span>24/7 (Chatbot AI tersedia)</span>
            </div>
            
            <h3>Feedback & Saran</h3>
            <p>Kami selalu terbuka untuk masukan dan saran dari pengguna. Gunakan chatbot AI di pojok kanan bawah untuk memberikan feedback langsung, atau kirim email untuk pertanyaan yang lebih detail.</p>
        </article>
    </main>

    <footer>
        <p>&copy; 2025 Modern Wiki. Dibuat dengan ‚ù§Ô∏è untuk masa depan.</p>
    </footer>

    <aside id="ai-assistant">
        <div id="ai-header" tabindex="0" role="button" aria-pressed="true">
            <span>ü§ñ Asisten AI</span>
            <span id="ai-toggle-state">Tutup</span>
        </div>
        <div id="ai-body">
            <div id="ai-messages">
                <div class="msg ai">Halo! Saya asisten AI Modern Wiki. Tanya saya tentang teknologi, kripto, sejarah, atau topik apapun!</div>
            </div>
            <div id="ai-controls">
                <input id="ai-input" type="text" placeholder="Ketik pesan..." autocomplete="off">
                <button id="ai-send">Kirim</button>
            </div>
        </div>
    </aside>

    <script>
        /* ===== NAVIGATION SYSTEM ===== */
        function initNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);
                    
                    // Remove active class from all nav links and content sections
                    navLinks.forEach(nl => nl.classList.remove('active'));
                    contentSections.forEach(cs => cs.classList.remove('active'));
                    
                    // Add active class to clicked nav link and corresponding content
                    link.classList.add('active');
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) {
                        targetSection.classList.add('active');
                        // Smooth scroll to section
                        targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                });
            });
        }

        /* ===== ENHANCED STARRY BACKGROUND ===== */
        const canvas = document.getElementById('stars'),
            ctx = canvas.getContext('2d');
        let stars = [];
        let animationId;

        function resizeCanvas() {
            canvas.width = innerWidth;
            canvas.height = innerHeight;
            initStars(); // Reinitialize stars when canvas resizes
        }
        
        addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function initStars() {
            stars = [];
            const starCount = Math.min(160, Math.floor((canvas.width * canvas.height) / 8000));
            for (let i = 0; i < starCount; i++) {
                stars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    r: Math.random() * 1.6 + 0.2,
                    s: Math.random() * 0.35 + 0.02,
                    opacity: Math.random() * 0.8 + 0.2
                });
            }
        }

        function drawStars() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            stars.forEach(s => {
                ctx.globalAlpha = s.opacity;
                ctx.fillStyle = '#0ff';
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
                ctx.fill();
            });
            ctx.globalAlpha = 1;
        }

        function updateStars() {
            stars.forEach(s => {
                s.y += s.s;
                if (s.y > canvas.height) {
                    s.y = 0;
                    s.x = Math.random() * canvas.width;
                }
            });
        }

        function animate() {
            try {
                drawStars();
                updateStars();
                animationId = requestAnimationFrame(animate);
            } catch (error) {
                console.error('Animation error:', error);
            }
        }

        /* ===== ENHANCED BTC PRICE FETCHER ===== */
        const topElem = document.getElementById('cryptoTop');
        const latestCrypto = document.getElementById('latest-crypto');
        let btcFetchInterval;

        async function fetchBtc() {
            try {
                topElem.innerHTML = '‚è≥ Memuat harga Bitcoin...';
                if (latestCrypto) latestCrypto.innerHTML = '<p>‚è≥ Memuat data Bitcoin...</p>';
                
                const res = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd,idr&include_24hr_change=true');
                if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
                
                const data = await res.json();
                const usd = data.bitcoin.usd;
                const idr = data.bitcoin.idr;
                const change = data.bitcoin.usd_24h_change ?? 0;
                const sign = change >= 0 ? '‚ñ≤' : '‚ñº';
                const color = change >= 0 ? '#00e5ff' : '#ff4d4d';
                const lastUpdate = new Date().toLocaleTimeString('id-ID');

                topElem.innerHTML = `üí∞ Bitcoin: $${usd.toLocaleString()} USD <span style="color:${color};">(${sign}${Math.abs(change).toFixed(2)}% 24h)</span>`;

                if (latestCrypto) {
                    latestCrypto.innerHTML = `
                        <p><strong>üí∞ Harga Bitcoin Terkini:</strong></p>
                        <ul>
                            <li><strong>USD:</strong> $${usd.toLocaleString()}</li>
                            <li><strong>IDR:</strong> Rp ${idr.toLocaleString()}</li>
                            <li><strong>Perubahan 24 jam:</strong> <span style="color:${color}">${change.toFixed(2)}%</span></li>
                            <li><strong>Terakhir update:</strong> ${lastUpdate}</li>
                            <li><strong>Sumber:</strong> CoinGecko API</li>
                        </ul>
                        <p><em>Data diperbarui otomatis setiap 1 menit.</em></p>
                    `;
                }
            } catch (error) {
                console.error('Bitcoin fetch error:', error);
                topElem.innerHTML = '‚ö†Ô∏è Gagal memuat harga Bitcoin (cek koneksi)';
                if (latestCrypto) {
                    latestCrypto.innerHTML = '<p>‚ö†Ô∏è Gagal memuat data Bitcoin. Pastikan koneksi internet tersedia.</p>';
                }
            }
        }

        /* ===== ENHANCED CHATBOT SYSTEM ===== */
        const assistant = document.getElementById('ai-assistant');
        const header = document.getElementById('ai-header');
        const body = document.getElementById('ai-body');
        const messages = document.getElementById('ai-messages');
        const input = document.getElementById('ai-input');
        const sendBtn = document.getElementById('ai-send');
        const toggleState = document.getElementById('ai-toggle-state');
        let isDragging = false;
        let dragOffsetX = 0;
        let dragOffsetY = 0;

        // Enhanced AI Response Library
        function getAIResponse(message) {
            const msg = message.toLowerCase().trim();
            
            // Bitcoin & Crypto responses
            if (msg.includes('bitcoin') || msg.includes('btc')) {
                if (msg.includes('harga') || msg.includes('price')) {
                    const currentPrice = topElem.textContent;
                    if (currentPrice.includes('$')) {
                        const price = currentPrice.split('$')[1]?.split(' ')[0];
                        return `Harga Bitcoin saat ini adalah $${price} USD. Data ini diperbarui secara real-time setiap menit dari CoinGecko API.`;
                    }
                    return 'Harga Bitcoin sedang dimuat. Coba tanya lagi dalam beberapa saat.';
                }
                if (msg.includes('apa itu') || msg.includes('pengertian')) {
                    return 'Bitcoin adalah cryptocurrency pertama dan terbesar di dunia. Diciptakan oleh Satoshi Nakamoto pada 2009, Bitcoin menggunakan teknologi blockchain untuk transaksi peer-to-peer tanpa perantara bank.';
                }
                return 'Bitcoin adalah aset kripto terdesentralisasi pertama. Harganya sangat fluktuatif dan dipengaruhi banyak faktor. Anda bisa lihat harga terbaru di bagian atas halaman ini.';
            }
            
            // Technology responses
            if (msg.includes('teknologi') || msg.includes('technology')) {
                if (msg.includes('ai') || msg.includes('artificial intelligence')) {
                    return 'AI atau Artificial Intelligence adalah simulasi kecerdasan manusia dalam mesin. AI mencakup machine learning, deep learning, dan neural networks untuk memecahkan masalah kompleks.';
                }
                if (msg.includes('blockchain')) {
                    return 'Blockchain adalah teknologi buku besar terdistribusi yang aman dan transparan. Setiap transaksi dicatat dalam "blok" yang terhubung secara kriptografis, membuatnya hampir mustahil untuk dimanipulasi.';
                }
                return 'Teknologi berkembang sangat pesat! Dari AI, blockchain, IoT hingga quantum computing. Ada aspek teknologi spesifik yang ingin Anda ketahui?';
            }
            
            // Investment & Finance responses
            if (msg.includes('investasi') || msg.includes('saham') || msg.includes('finance')) {
                return 'Investasi yang baik memerlukan riset mendalam dan diversifikasi. Jangan pernah investasi lebih dari yang bisa Anda tanggung kerugiannya. Selalu DYOR (Do Your Own Research)!';
            }
            
            // Modern Wiki specific
            if (msg.includes('modern wiki') || msg.includes('website ini') || msg.includes('situs ini')) {
                return 'Modern Wiki dibuat dengan teknologi web terdepan! Menggunakan HTML5, CSS3, JavaScript ES6+, Canvas API untuk animasi, dan fetch API untuk data real-time. Desain futuristik dengan tema neon cyan!';
            }
            
            // Greetings
            if (msg.includes('halo') || msg.includes('hai') || msg.includes('hello') || msg.includes('hi')) {
                return 'Halo juga! üëã Saya asisten AI Modern Wiki. Tanya saya tentang teknologi, Bitcoin, investasi, atau navigasi website inii!';
            }
            
            // Help & Navigation
            if (msg.includes('bantuan') || msg.includes('help') || msg.includes('navigasi')) {
                return 'Saya bisa membantu Anda dengan: üìä Informasi harga Bitcoin real-time, üíª Penjelasan teknologi modern, üìà Tips investasi dasar, üß≠ Navigasi website ini. Coba tanya hal spesifik!';
            }
            
            // History
            if (msg.includes('sejarah') || msg.includes('history')) {
                return 'Sejarah teknologi digital dimulai dari komputer tabung vakum tahun 1940an hingga era smartphone dan cloud computing hari ini. Setiap dekade membawa revolusi baru!';
            }
            
            // Time & Date
            if (msg.includes('waktu') || msg.includes('jam') || msg.includes('tanggal')) {
                const now = new Date();
                return `Sekarang adalah ${now.toLocaleDateString('id-ID', { 
                    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
                })} pukul ${now.toLocaleTimeString('id-ID')}.`;
            }
            
            // Contact & Developer
            if (msg.includes('kontak') || msg.includes('pembuat') || msg.includes('vlsk')) {
                return 'Modern Wiki dibuat oleh Vlsk2045. Anda bisa menghubungi melalui email: AnakEmas2045@gmail.com atau WhatsApp: 838 2173 0195.';
            }
            
            // Default responses
            const defaultResponses = [
                'Pertanyaan menarik! Bisa Anda perjelas lebih spesifik?',
                'Saya belum memiliki informasi lengkap tentang itu. Coba tanya tentang teknologi, Bitcoin, atau topik lain yang saya kuasai.',
                'Hmm, saya butuh konteks lebih. Apakah ini tentang teknologi, finansial, atau navigasi website?',
                'Maaf, saya belum bisa menjawab itu dengan baik. Tanya saya tentang hal lain ya!'
            ];
            
            return defaultResponses[Math.floor(Math.random() * defaultResponses.length)];
        }

        function togglePanel() {
            const isHidden = body.classList.toggle('hidden');
            toggleState.textContent = isHidden ? 'Buka' : 'Tutup';
            header.setAttribute('aria-pressed', !isHidden);
            if (!isHidden) {
                setTimeout(() => input.focus(), 100);
            }
        }

        // Panel toggle and drag functionality
        header.addEventListener('click', (e) => {
            if (!isDragging) {
                togglePanel();
            }
        });

        header.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                togglePanel();
            }
        });

        // Enhanced drag functionality
        header.addEventListener('mousedown', e => {
            isDragging = false; // Reset drag state
            dragOffsetX = e.clientX - assistant.getBoundingClientRect().left;
            dragOffsetY = e.clientY - assistant.getBoundingClientRect().top;
            header.style.cursor = 'grabbing';
            document.body.style.userSelect = 'none';
            e.preventDefault();
            
            // Add mousemove listener to track actual dragging
            const mouseMoveHandler = (moveEvent) => {
                isDragging = true;
                let x = moveEvent.clientX - dragOffsetX;
                let y = moveEvent.clientY - dragOffsetY;
                
                // Boundary constraints
                const padding = 10;
                const maxX = window.innerWidth - assistant.offsetWidth - padding;
                const maxY = window.innerHeight - assistant.offsetHeight - padding;
                x = Math.min(Math.max(x, padding), maxX);
                y = Math.min(Math.max(y, padding), maxY);
                
                assistant.style.left = x + 'px';
                assistant.style.top = y + 'px';
                assistant.style.right = 'auto';
                assistant.style.bottom = 'auto';
            };
            
            const mouseUpHandler = () => {
                document.removeEventListener('mousemove', mouseMoveHandler);
                document.removeEventListener('mouseup', mouseUpHandler);
                header.style.cursor = 'grab';
                document.body.style.userSelect = '';
                
                // Small delay to prevent click event from firing after drag
                setTimeout(() => {
                    isDragging = false;
                }, 100);
            };
            
            document.addEventListener('mousemove', mouseMoveHandler);
            document.addEventListener('mouseup', mouseUpHandler);
        });

        // Enhanced message handling
        function addMsg(text, who = 'ai') {
            const el = document.createElement('div');
            el.className = 'msg ' + (who === 'user' ? 'user' : 'ai');
            el.innerText = text;
            messages.appendChild(el);
            messages.scrollTop = messages.scrollHeight;
            
            // Auto-scroll to bottom with animation
            setTimeout(() => {
                messages.scrollTop = messages.scrollHeight;
            }, 50);
        }

        function showTypingIndicator() {
            const loadingEl = document.createElement('div');
            loadingEl.className = 'msg ai typing-indicator';
            loadingEl.innerHTML = '<div class="loading-indicator"></div> Mengetik...';
            messages.appendChild(loadingEl);
            messages.scrollTop = messages.scrollHeight;
            return loadingEl;
        }

        async function sendMessage() {
            const txt = input.value.trim();
            if (!txt) return;

            // Disable send button temporarily
            sendBtn.disabled = true;
            sendBtn.textContent = 'Kirim...';

            addMsg(txt, 'user');
            input.value = '';

            const typingIndicator = showTypingIndicator();

            try {
                // Simulate thinking time
                await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 1200));
                
                const reply = getAIResponse(txt);
                
                // Remove typing indicator
                messages.removeChild(typingIndicator);
                
                // Add AI response
                addMsg(reply, 'ai');
                
            } catch (error) {
                console.error('AI Response error:', error);
                messages.removeChild(typingIndicator);
                addMsg('‚ö†Ô∏è Maaf, ada masalah teknis. Coba lagi dalam beberapa saat.', 'ai');
            } finally {
                // Re-enable send button
                sendBtn.disabled = false;
                sendBtn.textContent = 'Kirim';
                input.focus();
            }
        }

        // Event listeners for chat
        sendBtn.addEventListener('click', sendMessage);
        input.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Enhanced input handling
        input.addEventListener('input', () => {
            // Auto-resize input if needed (for mobile)
            if (input.value.length > 50) {
                input.style.fontSize = '12px';
            } else {
                input.style.fontSize = '14px';
            }
        });

        /* ===== INITIALIZATION ===== */
        function initializeApp() {
            try {
                // Initialize navigation
                initNavigation();
                
                // Start animation
                initStars();
                animate();
                
                // Fetch Bitcoin price
                fetchBtc();
                btcFetchInterval = setInterval(fetchBtc, 60000); // Update every minute
                
                // Initialize chatbot
                if (!body.classList.contains('hidden')) {
                    toggleState.textContent = 'Tutup';
                    header.setAttribute('aria-pressed', 'true');
                    setTimeout(() => input.focus(), 500);
                }
                
                console.log('Modern Wiki initialized successfully! üöÄ');
                
            } catch (error) {
                console.error('Initialization error:', error);
            }
        }

        // Cleanup function for better performance
        function cleanup() {
            if (animationId) {
                cancelAnimationFrame(animationId);
            }
            if (btcFetchInterval) {
                clearInterval(btcFetchInterval);
            }
        }

        // Page visibility API for performance optimization
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // Pause animations when page is not visible
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
            } else {
                // Resume animations when page becomes visible
                animate();
            }
        });

        // Handle page unload
        window.addEventListener('beforeunload', cleanup);

        // Start the application
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        // Add some Easter eggs for fun! üéâ
        const konamiCode = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];
        let konamiIndex = 0;
        
        document.addEventListener('keydown', (e) => {
            if (e.keyCode === konamiCode[konamiIndex]) {
                konamiIndex++;
                if (konamiIndex === konamiCode.length) {
                    // Easter egg activated!
                    document.body.style.filter = 'hue-rotate(180deg)';
                    addMsg('üéâ Easter egg activated! Konami Code terdeteksi!', 'ai');
                    setTimeout(() => {
                        document.body.style.filter = '';
                    }, 3000);
                    konamiIndex = 0;
                }
            } else {
                konamiIndex = 0;
            }
        });

        // Console welcome message
        console.log(`
        üåü ===== MODERN WIKI ===== üåü
        
        Selamat datang di Modern Wiki!
        Website ini dibuat dengan:
        - HTML5 & CSS3
        - Vanilla JavaScript ES6+
        - Canvas API untuk animasi
        - Fetch API untuk data real-time
        - Responsive Design
        
        Pembuat: Vlsk2045
        Email: Vlskthegame@gmail.com
        
        Coba ketik konami code: ‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA
        
        Terima kasih telah mengunjungi! üöÄ
        `);
    </script>
</body>
</html>